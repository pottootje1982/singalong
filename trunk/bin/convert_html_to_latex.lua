require 'replace'

local html_to_latex = 
{
  [[&#256;]], [[\={A}]],
  [[&#257;]], [[\={a}]],
  [[&#258;]], [[\u{A}]],
  [[&#259;]], [[\u{a}]],
  [[&#260;]], [[\k{A}]],
  [[&#261;]], [[\k{a}]],
  [[&#262;]], [[\'{C}]],
  [[&#263;]], [[\'{c}]],
  [[&#264;]], [[\^{C}]],
  [[&#265;]], [[\^{c}]],
  [[&#266;]], [[\.{C}]],
  [[&#267;]], [[\.{c}]],
  [[&#268;]], [[\v{C}]],
  [[&#269;]], [[\v{c}]],
  [[&#270;]], [[\v{D}]],
  [[&#271;]], [[\v{d}]],
  [[&#272;]], [[\DH{}]],
  [[&#273;]], [[\dh{}]],
  [[&#274;]], [[\={E}]],
  [[&#275;]], [[\={e}]],
  [[&#276;]], [[\u{E}]],
  [[&#277;]], [[\u{e}]],
  [[&#278;]], [[\.{E}]],
  [[&#279;]], [[\.{e}]],
  [[&#280;]], [[\k{E}]],
  [[&#281;]], [[\k{e}]],
  [[&#282;]], [[\v{E}]],
  [[&#283;]], [[\v{e}]],
  [[&#284;]], [[\^{G}]],
  [[&#285;]], [[\^{g}]],
  [[&#286;]], [[\u{G}]],
  [[&#287;]], [[\u{g}]],
  [[&#288;]], [[\.{G}]],
  [[&#289;]], [[\.{g}]],
  [[&#290;]], [[\c{G}]],
  [[&#291;]], [[\c{g}]],
  [[&#292;]], [[\^{H}]],
  [[&#293;]], [[\^{h}]],
  [[&#296;]], [[\~{I}]],
  [[&#297;]], [[\~{\i}]],
  [[&#298;]], [[\={I}]],
  [[&#299;]], [[\={\i}]],
  [[&#300;]], [[\u{I}]],
  [[&#301;]], [[\u{\i}]],
  [[&#302;]], [[\k{I}]],
  [[&#303;]], [[\k{i}]],
  [[&#304;]], [[\.{I}]],
  [[&#305;]], [[\i{}]],
  --      [[&#306;]],[[\??]],	-- Don't know how in LaTeX
  --      [[&#307;]],[[\??]],	-- Don't know how in LaTeXy
  [[&#308;]], [[\^{J}]],
  [[&#309;]], [[\^{\j}]],
  [[&#310;]], [[\c{K}]],
  [[&#311;]], [[\c{k}]],
  --      [[&#312;]],[[\??]],	-- Don't know how in LaTeX
  [[&#313;]], [[\'{L}]],
  [[&#314;]], [[\'{l}]],
  [[&#315;]], [[\c{L}]],
  [[&#316;]], [[\c{l}]],
  [[&#317;]], [[\v{L}]],
  [[&#318;]], [[\v{l}]],
  --      [[&#319;]],[[\?{L}]],	-- Don't know how in LaTeX
  --      [[&#320;]],[[\?{l}]],	-- Don't know how in LaTeX
  [[&#321;]], [[\L]],
  [[&#322;]], [[\l]],
  [[&#323;]], [[\'{N}]],
  [[&#324;]], [[\'{n}]],
  [[&#325;]], [[\c{N}]],
  [[&#326;]], [[\c{n}]],
  [[&#327;]], [[\v{N}]],
  [[&#328;]], [[\v{n}]],
  [[&#329;]], [[\'n]],		-- Probably never occurs
  --      [[&#330;]],[[\??]],	-- Don't know how in LaTeX
  --      [[&#331;]],[[\??]],	-- Don't know how in LaTeX
  [[&#332;]], [[\={O}]],
  [[&#333;]], [[\={o}]],
  [[&#334;]], [[\u{O}]],
  [[&#335;]], [[\u{o}]],
  [[&#336;]], [[\H{O}]],
  [[&#337;]], [[\H{o}]],
  [[&#338;]], [[\OE]],
  [[&#339;]], [[\oe]],
  [[&#340;]], [[\'{R}]],
  [[&#341;]], [[\'{r}]],
  [[&#342;]], [[\c{R}]],
  [[&#343;]], [[\c{r}]],
  [[&#344;]], [[\v{R}]],
  [[&#345;]], [[\v{r}]],
  [[&#346;]], [[\'{S}]],
  [[&#347;]], [[\'{s}]],
  [[&#348;]], [[\^{S}]],
  [[&#349;]], [[\^{s}]],
  [[&#350;]], [[\c{S}]],
  [[&#351;]], [[\c{s}]],
  [[&#352;]], [[\v{S}]],
  [[&#353;]], [[\v{s}]],
  [[&#354;]], [[\c{T}]],
  [[&#355;]], [[\c{t}]],
  [[&#356;]], [[\v{T}]],
  [[&#357;]], [[\v{t}]],
  --      [[&#358;]],[[\?{T}]],	-- Don't know how in LaTeX
  --      [[&#359;]],[[\?{t}]],	-- Don't know how in LaTeX
  [[&#360;]], [[\~{U}]],
  [[&#361;]], [[\~{u}]],
  [[&#362;]], [[\={U}]],
  [[&#363;]], [[\={u}]],
  [[&#364;]], [[\u{U}]],
  [[&#365;]], [[\u{u}]],
  [[&#366;]], [[\r{U}]],
  [[&#367;]], [[\r{u}]],
  [[&#368;]], [[\H{U}]],
  [[&#369;]], [[\H{u}]],
  [[&#370;]], [[\k{U}]],
  [[&#371;]], [[\k{u}]],
  [[&#372;]], [[\^{W}]],
  [[&#373;]], [[\^{w}]],
  [[&#374;]], [[\^{Y}]],
  [[&#375;]], [[\^{y}]],
  [[&#376;]], [[\"{Y}]],
  [[&#377;]], [[\'{Z}]],
  [[&#378;]], [[\'{z}]],
  [[&#379;]], [[\.{Z}]],
  [[&#380;]], [[\.{z}]],
  [[&#381;]], [[\v{Z}]],
  [[&#382;]], [[\v{z}]],
}

local function scanForHtmlSymbols(str)
  for v in string.gmatch(str,"(&#[%d]+;)") do
    index = table.ifind(html_symbols_to_latex, v)
    str = str:gsub(v, html_symbols_to_latex[index+1])
  end
  return str
end

return scanForHtmlSymbols