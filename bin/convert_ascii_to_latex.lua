require 'misc'
require 'replace'

-- the following table will ensure that ASCII chars
-- that are not accepted by Latex will be converted
-- to the correct tag
local html_ascii_to_latex =
{
    [[%c]], [[\\]],
    [[&]],  [[\&]],                   -- 38
    [[%^]], [[\^{}]],                 -- 94
    [[_]],  [[\_]],                   -- 95
    [[]],   [[]],                     -- 127
    [[Ä]],  [[]],                     -- 128 \EUR, needs eurosym package
    [[Å]],   [[]],                     -- 129
    [[Ç]],  [[,]],                    -- 130
    [[É]],  [[]],                     -- 131 \m{f}, needs fc package
    [[Ñ]],  [[]],                     -- 132 \quotedblbase, needs fontenc
    [[Ö]],  [[\textellipsis ]],        -- 133 \ldot
    [[Ü]],  [[]],                     -- 134 \Cross, needs bbding
    [[á]],  [[]],                     -- 135
    [[à]],  [[]],                     -- 136
    [[â]],  [[]],                     -- 137 \permil, needs wasysym
    [[ä]],  [[\v{S}]],                -- 138
    [[ã]],  [[$<$]],                  -- 139
    [[å]],  [[\OE ]],                  -- 140
    [[ç]],   [[]],                     -- 141
    [[é]],  [[]],                     -- 142
    [[è]],   [[]],                     -- 143
    [[ê]],   [[]],                     -- 144
    [[ë]],  [[']],                    -- 145
    [[í]],  [[']],                    -- 146
    [[ì]],  [["]],                    -- 147
    [[î]],  [["]],                    -- 148
    [[ï]],  [[\textbullet ]],          -- 149
    [[ñ]],  [[-]],                    -- 150
    [[ó]],  [[-]],                    -- 151
    [[ò]],   [[]],                     -- 152
    [[ô]],  [[]],                     -- 153
    [[ö]],  [[\v{s}]],                -- 154
    [[õ]],  [[$>$]],                  -- 155
    [[ú]],  [[\oe ]],                  -- 156
    [[ù]],   [[]],                     -- 157
    [[û]],  [[\v{z}]],                -- 158
    [[ü]],  [[\"{A}]],                -- 159
    [[¬†]],    [[ ]],                    -- 160
--  [[¬°]],    [[]],                     -- 161
    [[¬¢]],    [[]],                     -- 162
--  [[¬£]],    [[]],                     -- 163
    [[¬§]],    [[]],                     -- 164
    [[¬•]],    [[]],                     -- 165
    [[¬¶]],    [[]],                     -- 166
--  [[¬ß]],    [[]],                     -- 167
    [[¬®]],    [[]],                     -- 168
--  [[¬©]],    [[]],                     -- 169
--  [[¬™]],    [[]],                     -- 170
    [[¬´]],    [[]],                     -- 171
    [[¬¨]],    [[]],                     -- 172
--  [[¬≠]],    [[]],                     -- 173
--  [[¬Æ]],    [[]],                     -- 174
    [[¬Ø]],    [[]],                     -- 175
--  [[¬∞]],    [[]],                     -- 176
    [[¬±]],    [[]],                     -- 177
    [[¬≤]],    [[\textsuperscript{2}]],  -- 178
    [[¬≥]],    [[\textsuperscript{3}]],  -- 179
    [[¬¥]],    [[']],                    -- 180
    [[¬µ]],    [[]],                     -- 181
--  [[¬∂]],    [[]],                     -- 182
--  [[¬∑]],    [[]],                     -- 183
--  [[¬∏]],    [[]],                     -- 184
    [[¬π]],    [[\textsuperscript{1}]],  -- 185
    [[¬∫]],    [[\textsuperscript{0}]],  -- 186
    [[¬ª]],    [[]],                     -- 187
--  [[¬º]],    [[]],                     -- 188
--  [[¬Ω]],    [[]],                     -- 189
--  [[¬æ]],    [[]],                     -- 190
--  [[¬ø]],    [[]],                     -- 191
--  [[√Ä]],    [[]],                     -- 192
--  [[√Å]],    [[]],                      -- 193
--  [[√Ç]],    [[]],                     -- 194
--  [[√É]],    [[]],                     -- 195
--  [[√Ñ]],    [[]],                     -- 196
--  [[√Ö]],    [[]],                     -- 197
--  [[√Ü]],    [[]],                     -- 198
--  [[√á]],    [[]],                     -- 199
--  [[√à]],    [[]],                     -- 200
--  [[√â]],    [[]],                     -- 201
--  [[√ä]],    [[]],                     -- 202
--  [[√ã]],    [[]],                     -- 203
--  [[√å]],    [[]],                     -- 204
--  [[√ç]],    [[]],                      -- 205
--  [[√é]],    [[]],                     -- 206
--  [[√è]],    [[]],                      -- 207
    [[√ê]],    [[]],                      -- 208
--  [[√ë]],    [[]],                     -- 209
--  [[√í]],    [[]],                     -- 210
--  [[√ì]],    [[]],                     -- 211
--  [[√î]],    [[]],                     -- 212
--  [[√ï]],    [[]],                     -- 213
--  [[√ñ]],    [[]],                     -- 214
    [[√ó]],    [[]],                     -- 215
--  [[√ò]],    [[]],                      -- 216
--  [[√ô]],    [[]],                     -- 217
--  [[√ö]],    [[]],                     -- 218
--  [[√õ]],    [[]],                     -- 219
--  [[√ú]],    [[]],                     -- 220
--  [[√ù]],    [[]],                      -- 221
    [[√û]],    [[]],                     -- 222
--  [[√ü]],    [[]],                     -- 223
--  [[√†]],    [[]],                     -- 224
--  [[√°]],    [[]],                     -- 225
--  [[√¢]],    [[]],                     -- 226
--  [[√£]],    [[]],                     -- 227
--  [[√§]],    [[]],                     -- 228
--  [[√•]],    [[]],                     -- 229
--  [[√¶]],    [[]],                     -- 230
--  [[√ß]],    [[]],                     -- 231
--  [[√®]],    [[]],                     -- 232
--  [[√©]],    [[]],                     -- 233
--  [[√™]],    [[]],                     -- 234
--  [[√´]],    [[]],                     -- 235
--  [[√¨]],    [[]],                     -- 236
--  [[√≠]],    [[]],                     -- 237
--  [[√Æ]],    [[]],                     -- 238
--  [[√Ø]],    [[]],                     -- 239
    [[√∞]],    [[]],                     -- 240
--  [[√±]],    [[]],                     -- 241
--  [[√≤]],    [[]],                     -- 242
--  [[√≥]],    [[]],                     -- 243
--  [[√¥]],    [[]],                     -- 244
--  [[√µ]],    [[]],                     -- 245
--  [[√∂]],    [[]],                     -- 246
    [[√∑]],    [[]],                     -- 247 \div
--  [[√∏]],    [[]],                     -- 248
--  [[√π]],    [[]],                     -- 249
--  [[√∫]],    [[]],                     -- 250
--  [[√ª]],    [[]],                     -- 251
--  [[√º]],    [[]],                     -- 252
--  [[√Ω]],    [[]],                     -- 253
    [[√æ]],    [[]],                     -- 254
--  [[√ø]],    [[]],                     -- 255

-- Other crap found in html
    [[¶]],  [[]],

}

return
function(str)
  return replace(str, html_ascii_to_latex)
end
